

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mDNS Service &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ESP-Modbus" href="modbus.html" />
    <link rel="prev" title="ESP Local Control" href="esp_local_ctrl.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/protocols/mdns.html" />

<link rel="stylesheet" href="https://media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-reference/protocols/mdns"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
<script async type="text/javascript" src="../../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="espressif-esp-idf" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/api-reference/protocols/mdns.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">Peripherals</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Protocols</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="asio.html">ASIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="mqtt.html">ESP-MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_tls.html">ESP-TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_http_client.html">HTTP Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_http_server.html">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_server.html">HTTPS Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="icmp_echo.html">ICMP Echo</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_local_ctrl.html">Local Control</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="mdns.html#">mDNS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="mdns.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="mdns.html#application-example">Application Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="mdns.html#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="modbus.html">Modbus</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_websocket_client.html">Websocket Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_serial_slave_link.html">ESP Serial Slave Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#ip-network-layer">IP Network Layer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">Provisioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">Error Codes Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="index.html">Application Protocols</a> &raquo;</li>
        
      <li>mDNS Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-reference/protocols/mdns.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mdns-service">
<h1>mDNS Service<a class="headerlink" href="mdns.html#mdns-service" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://espressif-docs.readthedocs-hosted.com/projects/esp-idf/zh_CN/latest/api-reference/protocols/mdns.html">[中文]</a></p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="mdns.html#overview" title="Permalink to this headline">¶</a></h2>
<p>mDNS is a multicast UDP service that is used to provide local network service and host discovery.</p>
<p>mDNS is installed by default on most operating systems or is available as separate package. On <code class="docutils literal notranslate"><span class="pre">Mac</span> <span class="pre">OS</span></code> it is installed by default and is called <code class="docutils literal notranslate"><span class="pre">Bonjour</span></code>. Apple releases an installer for <code class="docutils literal notranslate"><span class="pre">Windows</span></code> that can be found <a class="reference external" href="https://support.apple.com/downloads/bonjour%2520for%2520windows">on Apple’s support page</a>. On <code class="docutils literal notranslate"><span class="pre">Linux</span></code>, mDNS is provided by <a class="reference external" href="https://github.com/lathiat/avahi">avahi</a> and is usually installed by default.</p>
<div class="section" id="mdns-properties">
<h3>mDNS Properties<a class="headerlink" href="mdns.html#mdns-properties" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">hostname</span></code>: the hostname that the device will respond to. If not set, the <code class="docutils literal notranslate"><span class="pre">hostname</span></code> will be read from the interface. Example: <code class="docutils literal notranslate"><span class="pre">my-esp32</span></code> will resolve to <code class="docutils literal notranslate"><span class="pre">my-esp32.local</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">default_instance</span></code>: friendly name for your device, like <code class="docutils literal notranslate"><span class="pre">Jhon's</span> <span class="pre">ESP32</span> <span class="pre">Thing</span></code>. If not set, <code class="docutils literal notranslate"><span class="pre">hostname</span></code> will be used.</li>
</ul>
</div></blockquote>
<p>Example method to start mDNS for the STA interface and set <code class="docutils literal notranslate"><span class="pre">hostname</span></code> and <code class="docutils literal notranslate"><span class="pre">default_instance</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">start_mdns_service</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//initialize mDNS service</span>
    <span class="n">esp_err_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">mdns_init</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;MDNS Init failed: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//set hostname</span>
    <span class="n">mdns_hostname_set</span><span class="p">(</span><span class="s">&quot;my-esp32&quot;</span><span class="p">);</span>
    <span class="c1">//set default instance</span>
    <span class="n">mdns_instance_name_set</span><span class="p">(</span><span class="s">&quot;Jhon&#39;s ESP32 Thing&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mdns-services">
<h3>mDNS Services<a class="headerlink" href="mdns.html#mdns-services" title="Permalink to this headline">¶</a></h3>
<p>mDNS can advertise information about network services that your device offers. Each service is defined by a few properties.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: friendly name for your service, like <code class="docutils literal notranslate"><span class="pre">Jhon's</span> <span class="pre">ESP32</span> <span class="pre">Web</span> <span class="pre">Server</span></code>. If not defined, <code class="docutils literal notranslate"><span class="pre">default_instance</span></code> will be used.</li>
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: (required) service type, prepended with underscore. Some common types can be found <a class="reference external" href="http://www.dns-sd.org/serviceTypes.html">here</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: (required) protocol that the service runs on, prepended with underscore. Example: <code class="docutils literal notranslate"><span class="pre">_tcp</span></code> or <code class="docutils literal notranslate"><span class="pre">_udp</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">port</span></code>: (required) network port that the service runs on</li>
<li><code class="docutils literal notranslate"><span class="pre">txt</span></code>: <code class="docutils literal notranslate"><span class="pre">{var,</span> <span class="pre">val}</span></code> array of strings, used to define properties for your service</li>
</ul>
</div></blockquote>
<p>Example method to add a few services and different properties:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">add_mdns_services</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//add our services</span>
    <span class="n">mdns_service_add</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;_http&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">mdns_service_add</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;_arduino&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">,</span> <span class="mi">3232</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">mdns_service_add</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;_myservice&quot;</span><span class="p">,</span> <span class="s">&quot;_udp&quot;</span><span class="p">,</span> <span class="mi">1234</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="c1">//NOTE: services must be added before their properties can be set</span>
    <span class="c1">//use custom instance for the web server</span>
    <span class="n">mdns_service_instance_name_set</span><span class="p">(</span><span class="s">&quot;_http&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">,</span> <span class="s">&quot;Jhon&#39;s ESP32 Web Server&quot;</span><span class="p">);</span>

    <span class="n">mdns_txt_item_t</span> <span class="n">serviceTxtData</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">{</span><span class="s">&quot;board&quot;</span><span class="p">,</span><span class="s">&quot;esp32&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s">&quot;u&quot;</span><span class="p">,</span><span class="s">&quot;user&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s">&quot;p&quot;</span><span class="p">,</span><span class="s">&quot;password&quot;</span><span class="p">}</span>
    <span class="p">};</span>
    <span class="c1">//set txt data for service (will free and replace current data)</span>
    <span class="n">mdns_service_txt_set</span><span class="p">(</span><span class="s">&quot;_http&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">,</span> <span class="n">serviceTxtData</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

    <span class="c1">//change service port</span>
    <span class="n">mdns_service_port_set</span><span class="p">(</span><span class="s">&quot;_myservice&quot;</span><span class="p">,</span> <span class="s">&quot;_udp&quot;</span><span class="p">,</span> <span class="mi">4321</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mdns-query">
<h3>mDNS Query<a class="headerlink" href="mdns.html#mdns-query" title="Permalink to this headline">¶</a></h3>
<p>mDNS provides methods for browsing for services and resolving host’s IP/IPv6 addresses.</p>
<p>Results for services are returned as a linked list of <code class="docutils literal notranslate"><span class="pre">mdns_result_t</span></code> objects.</p>
<p>Example method to resolve host IPs:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">resolve_mdns_host</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">host_name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Query A: %s.local&quot;</span><span class="p">,</span> <span class="n">host_name</span><span class="p">);</span>

    <span class="k">struct</span> <span class="n">ip4_addr</span> <span class="n">addr</span><span class="p">;</span>
    <span class="n">addr</span><span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">esp_err_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">mdns_query_a</span><span class="p">(</span><span class="n">host_name</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span>  <span class="o">&amp;</span><span class="n">addr</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">err</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="n">err</span> <span class="o">==</span> <span class="n">ESP_ERR_NOT_FOUND</span><span class="p">){</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Host was not found!&quot;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Query Failed&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">printf</span><span class="p">(</span><span class="n">IPSTR</span><span class="p">,</span> <span class="n">IP2STR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">addr</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example method to resolve local services:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">if_str</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;STA&quot;</span><span class="p">,</span> <span class="s">&quot;AP&quot;</span><span class="p">,</span> <span class="s">&quot;ETH&quot;</span><span class="p">,</span> <span class="s">&quot;MAX&quot;</span><span class="p">};</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">ip_protocol_str</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;V4&quot;</span><span class="p">,</span> <span class="s">&quot;V6&quot;</span><span class="p">,</span> <span class="s">&quot;MAX&quot;</span><span class="p">};</span>

<span class="kt">void</span> <span class="nf">mdns_print_results</span><span class="p">(</span><span class="n">mdns_result_t</span> <span class="o">*</span> <span class="n">results</span><span class="p">){</span>
    <span class="n">mdns_result_t</span> <span class="o">*</span> <span class="n">r</span> <span class="o">=</span> <span class="n">results</span><span class="p">;</span>
    <span class="n">mdns_ip_addr_t</span> <span class="o">*</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">r</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d: Interface: %s, Type: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">if_str</span><span class="p">[</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">tcpip_if</span><span class="p">],</span> <span class="n">ip_protocol_str</span><span class="p">[</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">ip_protocol</span><span class="p">]);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">instance_name</span><span class="p">){</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;  PTR : %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">instance_name</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">hostname</span><span class="p">){</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;  SRV : %s.local:%u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">hostname</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">port</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">txt_count</span><span class="p">){</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;  TXT : [%u] &quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">txt_count</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">t</span><span class="o">&lt;</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">txt_count</span><span class="p">;</span> <span class="n">t</span><span class="o">++</span><span class="p">){</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s=%s; &quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">txt</span><span class="p">[</span><span class="n">t</span><span class="p">].</span><span class="n">key</span><span class="p">,</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">txt</span><span class="p">[</span><span class="n">t</span><span class="p">].</span><span class="n">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">addr</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">a</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">addr</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">IPADDR_TYPE_V6</span><span class="p">){</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;  AAAA: &quot;</span> <span class="n">IPV6STR</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">IPV62STR</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">addr</span><span class="p">.</span><span class="n">u_addr</span><span class="p">.</span><span class="n">ip6</span><span class="p">));</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;  A   : &quot;</span> <span class="n">IPSTR</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">IP2STR</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">addr</span><span class="p">.</span><span class="n">u_addr</span><span class="p">.</span><span class="n">ip4</span><span class="p">)));</span>
            <span class="p">}</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">find_mdns_service</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">service_name</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">proto</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ESP_LOGI</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span> <span class="s">&quot;Query PTR: %s.%s.local&quot;</span><span class="p">,</span> <span class="n">service_name</span><span class="p">,</span> <span class="n">proto</span><span class="p">);</span>

    <span class="n">mdns_result_t</span> <span class="o">*</span> <span class="n">results</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">esp_err_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">mdns_query_ptr</span><span class="p">(</span><span class="n">service_name</span><span class="p">,</span> <span class="n">proto</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span>  <span class="o">&amp;</span><span class="n">results</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">err</span><span class="p">){</span>
        <span class="n">ESP_LOGE</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span> <span class="s">&quot;Query Failed&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">results</span><span class="p">){</span>
        <span class="n">ESP_LOGW</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span> <span class="s">&quot;No results found!&quot;</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">mdns_print_results</span><span class="p">(</span><span class="n">results</span><span class="p">);</span>
    <span class="n">mdns_query_results_free</span><span class="p">(</span><span class="n">results</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example of using the methods above:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">my_app_some_method</span><span class="p">(){</span>
    <span class="c1">//search for esp32-mdns.local</span>
    <span class="n">resolve_mdns_host</span><span class="p">(</span><span class="s">&quot;esp32-mdns&quot;</span><span class="p">);</span>

    <span class="c1">//search for HTTP servers</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_http&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span>
    <span class="c1">//or file servers</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_smb&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span> <span class="c1">//windows sharing</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_afpovertcp&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span> <span class="c1">//apple sharing</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_nfs&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span> <span class="c1">//NFS server</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_ftp&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span> <span class="c1">//FTP server</span>
    <span class="c1">//or networked printer</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_printer&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span>
    <span class="n">find_mdns_service</span><span class="p">(</span><span class="s">&quot;_ipp&quot;</span><span class="p">,</span> <span class="s">&quot;_tcp&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="application-example">
<h2>Application Example<a class="headerlink" href="mdns.html#application-example" title="Permalink to this headline">¶</a></h2>
<p>mDNS server/scanner example: <a class="reference external" href="https://github.com/espressif/esp-idf/tree/f91080637/examples/protocols/mdns">protocols/mdns</a>.</p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="mdns.html#api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="header-file">
<h3>Header File<a class="headerlink" href="mdns.html#header-file" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/mdns/include/mdns.h">mdns/include/mdns.h</a></li>
</ul>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="mdns.html#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv49mdns_initv">
<span id="_CPPv39mdns_initv"></span><span id="_CPPv29mdns_initv"></span><span id="mdns_init__void"></span><span class="target" id="mdns_8h_1ad323a4dfba3545c43ebda0f3f7c515e0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv49mdns_initv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Initialize mDNS on given interface. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK on success</li>
<li>ESP_ERR_INVALID_STATE when failed to register event handler</li>
<li>ESP_ERR_NO_MEM on memory error</li>
<li>ESP_FAIL when failed to start mdns task </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv49mdns_freev">
<span id="_CPPv39mdns_freev"></span><span id="_CPPv29mdns_freev"></span><span id="mdns_free__void"></span><span class="target" id="mdns_8h_1a60085437d50474fff82bda1b027d9da3"></span>void <code class="descname">mdns_free</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv49mdns_freev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Stop and free mDNS server. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv417mdns_hostname_setPKc">
<span id="_CPPv317mdns_hostname_setPKc"></span><span id="_CPPv217mdns_hostname_setPKc"></span><span id="mdns_hostname_set__cCP"></span><span class="target" id="mdns_8h_1ac64252305d70be97d202f2edd5f44ccc"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_hostname_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>hostname</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv417mdns_hostname_setPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the hostname for mDNS server required if you want to advertise services. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">hostname</span></code>: Hostname to set</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv422mdns_instance_name_setPKc">
<span id="_CPPv322mdns_instance_name_setPKc"></span><span id="_CPPv222mdns_instance_name_setPKc"></span><span id="mdns_instance_name_set__cCP"></span><span class="target" id="mdns_8h_1a1d4b64b9a4eee80a09db4ecc3ddf9d69"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_instance_name_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>instance_name</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv422mdns_instance_name_setPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the default instance name for mDNS server. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: Instance name to set</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv416mdns_service_addPKcPKcPKc8uint16_tA_15mdns_txt_item_t6size_t">
<span id="_CPPv316mdns_service_addPKcPKcPKc8uint16_tA_15mdns_txt_item_t6size_t"></span><span id="_CPPv216mdns_service_addPKcPKcPKc8uint16_tA_15mdns_txt_item_t6size_t"></span><span id="mdns_service_add__cCP.cCP.cCP.uint16_t.mdns_txt_item_tA.s"></span><span class="target" id="mdns_8h_1af0f82c5ac7d0a1c225b4b984e319a6fc"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_add</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>instance_name</em>, <em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint16_t <em>port</em>, <a class="reference internal" href="mdns.html#_CPPv415mdns_txt_item_t" title="mdns_txt_item_t">mdns_txt_item_t</a> <em>txt</em>[], size_t <em>num_items</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv416mdns_service_addPKcPKcPKc8uint16_tA_15mdns_txt_item_t6size_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add service to mDNS server. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_FAIL failed to add service </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: instance name to set. If NULL, global instance name or hostname will be used </li>
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">port</span></code>: service port </li>
<li><code class="docutils literal notranslate"><span class="pre">txt</span></code>: string array of TXT data (eg. {{“var”,”val”},{“other”,”2”}}) </li>
<li><code class="docutils literal notranslate"><span class="pre">num_items</span></code>: number of items in TXT data</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv419mdns_service_removePKcPKc">
<span id="_CPPv319mdns_service_removePKcPKc"></span><span id="_CPPv219mdns_service_removePKcPKc"></span><span id="mdns_service_remove__cCP.cCP"></span><span class="target" id="mdns_8h_1a7f8ebdf3f99864b614f0a745965f7261"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_remove</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv419mdns_service_removePKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove service from mDNS server. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp)</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv430mdns_service_instance_name_setPKcPKcPKc">
<span id="_CPPv330mdns_service_instance_name_setPKcPKcPKc"></span><span id="_CPPv230mdns_service_instance_name_setPKcPKcPKc"></span><span id="mdns_service_instance_name_set__cCP.cCP.cCP"></span><span class="target" id="mdns_8h_1ab10c7a6fd81148a1f115d6e1a8045950"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_instance_name_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, <em class="property">const</em> char *<em>instance_name</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv430mdns_service_instance_name_setPKcPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set instance name for service. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: instance name to set</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv421mdns_service_port_setPKcPKc8uint16_t">
<span id="_CPPv321mdns_service_port_setPKcPKc8uint16_t"></span><span id="_CPPv221mdns_service_port_setPKcPKc8uint16_t"></span><span id="mdns_service_port_set__cCP.cCP.uint16_t"></span><span class="target" id="mdns_8h_1a76f4ca1857edb589be79074b01b5b769"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_port_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint16_t <em>port</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv421mdns_service_port_setPKcPKc8uint16_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set service port. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">port</span></code>: service port</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv420mdns_service_txt_setPKcPKcA_15mdns_txt_item_t7uint8_t">
<span id="_CPPv320mdns_service_txt_setPKcPKcA_15mdns_txt_item_t7uint8_t"></span><span id="_CPPv220mdns_service_txt_setPKcPKcA_15mdns_txt_item_t7uint8_t"></span><span id="mdns_service_txt_set__cCP.cCP.mdns_txt_item_tA.uint8_t"></span><span class="target" id="mdns_8h_1a889b942de6d2ad2ef428b21ef91226fe"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_txt_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, <a class="reference internal" href="mdns.html#_CPPv415mdns_txt_item_t" title="mdns_txt_item_t">mdns_txt_item_t</a> <em>txt</em>[], uint8_t <em>num_items</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv420mdns_service_txt_setPKcPKcA_15mdns_txt_item_t7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Replace all TXT items for service. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">txt</span></code>: array of TXT data (eg. {{“var”,”val”},{“other”,”2”}}) </li>
<li><code class="docutils literal notranslate"><span class="pre">num_items</span></code>: number of items in TXT data</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv425mdns_service_txt_item_setPKcPKcPKcPKc">
<span id="_CPPv325mdns_service_txt_item_setPKcPKcPKcPKc"></span><span id="_CPPv225mdns_service_txt_item_setPKcPKcPKcPKc"></span><span id="mdns_service_txt_item_set__cCP.cCP.cCP.cCP"></span><span class="target" id="mdns_8h_1a2b95f47cce6d8fb446ff0b17d4dac01b"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_txt_item_set</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, <em class="property">const</em> char *<em>key</em>, <em class="property">const</em> char *<em>value</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv425mdns_service_txt_item_setPKcPKcPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set/Add TXT item for service TXT record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">key</span></code>: the key that you want to add/update </li>
<li><code class="docutils literal notranslate"><span class="pre">value</span></code>: the new value of the key</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv428mdns_service_txt_item_removePKcPKcPKc">
<span id="_CPPv328mdns_service_txt_item_removePKcPKcPKc"></span><span id="_CPPv228mdns_service_txt_item_removePKcPKcPKc"></span><span id="mdns_service_txt_item_remove__cCP.cCP.cCP"></span><span class="target" id="mdns_8h_1a78211b1c712153774252cdd4f4d3fbe0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_txt_item_remove</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, <em class="property">const</em> char *<em>key</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv428mdns_service_txt_item_removePKcPKcPKc" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove TXT item for service TXT record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error</li>
<li>ESP_ERR_NOT_FOUND Service not found</li>
<li>ESP_ERR_NO_MEM memory error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _ftp, etc) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp) </li>
<li><code class="docutils literal notranslate"><span class="pre">key</span></code>: the key that you want to remove</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv423mdns_service_remove_allv">
<span id="_CPPv323mdns_service_remove_allv"></span><span id="_CPPv223mdns_service_remove_allv"></span><span id="mdns_service_remove_all__void"></span><span class="target" id="mdns_8h_1a16908d4bdd7a28d063bcaabffde74cec"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_service_remove_all</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv423mdns_service_remove_allv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove and free all services from mDNS server. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_ARG Parameter error </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv410mdns_queryPKcPKcPKc8uint16_t8uint32_t6size_tPP13mdns_result_t">
<span id="_CPPv310mdns_queryPKcPKcPKc8uint16_t8uint32_t6size_tPP13mdns_result_t"></span><span id="_CPPv210mdns_queryPKcPKcPKc8uint16_t8uint32_t6size_tPP13mdns_result_t"></span><span id="mdns_query__cCP.cCP.cCP.uint16_t.uint32_t.s.mdns_result_tPP"></span><span class="target" id="mdns_8h_1a75ef739fd2cf27f0f01616cf058ba1d5"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>name</em>, <em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint16_t <em>type</em>, uint32_t <em>timeout</em>, size_t <em>max_results</em>, <a class="reference internal" href="mdns.html#_CPPv413mdns_result_t" title="mdns_result_t">mdns_result_t</a> **<em>results</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv410mdns_queryPKcPKcPKc8uint16_t8uint32_t6size_tPP13mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for host or service All following query methods are derived from this one. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG timeout was not given </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: service instance or host name (NULL for PTR queries) </li>
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _arduino, _ftp etc.) (NULL for host queries) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp, etc.) (NULL for host queries) </li>
<li><code class="docutils literal notranslate"><span class="pre">type</span></code>: type of query (MDNS_TYPE_*) </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answers. </li>
<li><code class="docutils literal notranslate"><span class="pre">max_results</span></code>: maximum results to be collected </li>
<li><code class="docutils literal notranslate"><span class="pre">results</span></code>: pointer to the results of the query results must be freed using mdns_query_results_free below</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv423mdns_query_results_freeP13mdns_result_t">
<span id="_CPPv323mdns_query_results_freeP13mdns_result_t"></span><span id="_CPPv223mdns_query_results_freeP13mdns_result_t"></span><span id="mdns_query_results_free__mdns_result_tP"></span><span class="target" id="mdns_8h_1ad7a11c09688e313da1d3eccd03cfd99e"></span>void <code class="descname">mdns_query_results_free</code><span class="sig-paren">(</span><a class="reference internal" href="mdns.html#_CPPv413mdns_result_t" title="mdns_result_t">mdns_result_t</a> *<em>results</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv423mdns_query_results_freeP13mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Free query results. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">results</span></code>: linked list of results to be freed </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv414mdns_query_ptrPKcPKc8uint32_t6size_tPP13mdns_result_t">
<span id="_CPPv314mdns_query_ptrPKcPKc8uint32_t6size_tPP13mdns_result_t"></span><span id="_CPPv214mdns_query_ptrPKcPKc8uint32_t6size_tPP13mdns_result_t"></span><span id="mdns_query_ptr__cCP.cCP.uint32_t.s.mdns_result_tPP"></span><span class="target" id="mdns_8h_1a6ff4f04336fc1001383370ddbdaf3bca"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query_ptr</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint32_t <em>timeout</em>, size_t <em>max_results</em>, <a class="reference internal" href="mdns.html#_CPPv413mdns_result_t" title="mdns_result_t">mdns_result_t</a> **<em>results</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv414mdns_query_ptrPKcPKc8uint32_t6size_tPP13mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for service. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG parameter error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _arduino, _ftp etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp, etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answer. </li>
<li><code class="docutils literal notranslate"><span class="pre">max_results</span></code>: maximum results to be collected </li>
<li><code class="docutils literal notranslate"><span class="pre">results</span></code>: pointer to the results of the query</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv414mdns_query_srvPKcPKcPKc8uint32_tPP13mdns_result_t">
<span id="_CPPv314mdns_query_srvPKcPKcPKc8uint32_tPP13mdns_result_t"></span><span id="_CPPv214mdns_query_srvPKcPKcPKc8uint32_tPP13mdns_result_t"></span><span id="mdns_query_srv__cCP.cCP.cCP.uint32_t.mdns_result_tPP"></span><span class="target" id="mdns_8h_1a7650de908662e5b763187120593cc3c0"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query_srv</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>instance_name</em>, <em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint32_t <em>timeout</em>, <a class="reference internal" href="mdns.html#_CPPv413mdns_result_t" title="mdns_result_t">mdns_result_t</a> **<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv414mdns_query_srvPKcPKcPKc8uint32_tPP13mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for SRV record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG parameter error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: service instance name </li>
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _arduino, _ftp etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp, etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answer. </li>
<li><code class="docutils literal notranslate"><span class="pre">result</span></code>: pointer to the result of the query</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv414mdns_query_txtPKcPKcPKc8uint32_tPP13mdns_result_t">
<span id="_CPPv314mdns_query_txtPKcPKcPKc8uint32_tPP13mdns_result_t"></span><span id="_CPPv214mdns_query_txtPKcPKcPKc8uint32_tPP13mdns_result_t"></span><span id="mdns_query_txt__cCP.cCP.cCP.uint32_t.mdns_result_tPP"></span><span class="target" id="mdns_8h_1a7b3559ac8131c14a4eca73a781d22178"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query_txt</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>instance_name</em>, <em class="property">const</em> char *<em>service_type</em>, <em class="property">const</em> char *<em>proto</em>, uint32_t <em>timeout</em>, <a class="reference internal" href="mdns.html#_CPPv413mdns_result_t" title="mdns_result_t">mdns_result_t</a> **<em>result</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv414mdns_query_txtPKcPKcPKc8uint32_tPP13mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for TXT record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG parameter error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">instance_name</span></code>: service instance name </li>
<li><code class="docutils literal notranslate"><span class="pre">service_type</span></code>: service type (_http, _arduino, _ftp etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">proto</span></code>: service protocol (_tcp, _udp, etc.) </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answer. </li>
<li><code class="docutils literal notranslate"><span class="pre">result</span></code>: pointer to the result of the query</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv412mdns_query_aPKc8uint32_tP14esp_ip4_addr_t">
<span id="_CPPv312mdns_query_aPKc8uint32_tP14esp_ip4_addr_t"></span><span id="_CPPv212mdns_query_aPKc8uint32_tP14esp_ip4_addr_t"></span><span id="mdns_query_a__cCP.uint32_t.esp_ip4_addr_tP"></span><span class="target" id="mdns_8h_1a1c7ccc14c3a0a6cf29af3fe33345ad78"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query_a</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>host_name</em>, uint32_t <em>timeout</em>, esp_ip4_addr_t *<em>addr</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv412mdns_query_aPKc8uint32_tP14esp_ip4_addr_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for A record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG parameter error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">host_name</span></code>: host name to look for </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answer. </li>
<li><code class="docutils literal notranslate"><span class="pre">addr</span></code>: pointer to the resulting IP4 address</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv415mdns_query_aaaaPKc8uint32_tP14esp_ip6_addr_t">
<span id="_CPPv315mdns_query_aaaaPKc8uint32_tP14esp_ip6_addr_t"></span><span id="_CPPv215mdns_query_aaaaPKc8uint32_tP14esp_ip6_addr_t"></span><span id="mdns_query_aaaa__cCP.uint32_t.esp_ip6_addr_tP"></span><span class="target" id="mdns_8h_1a1b699f954b28e075df5ff977b83af819"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_query_aaaa</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>host_name</em>, uint32_t <em>timeout</em>, esp_ip6_addr_t *<em>addr</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv415mdns_query_aaaaPKc8uint32_tP14esp_ip6_addr_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Query mDNS for A record. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><ul class="simple">
<li>ESP_OK success</li>
<li>ESP_ERR_INVALID_STATE mDNS is not running</li>
<li>ESP_ERR_NO_MEM memory error</li>
<li>ESP_ERR_INVALID_ARG parameter error </li>
</ul>
</dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">host_name</span></code>: host name to look for </li>
<li><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: time in milliseconds to wait for answer. If 0, max_results needs to be defined </li>
<li><code class="docutils literal notranslate"><span class="pre">addr</span></code>: pointer to the resulting IP6 address</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv424mdns_handle_system_eventPvP14system_event_t">
<span id="_CPPv324mdns_handle_system_eventPvP14system_event_t"></span><span id="_CPPv224mdns_handle_system_eventPvP14system_event_t"></span><span id="mdns_handle_system_event__voidP.system_event_tP"></span><span class="target" id="mdns_8h_1aafd7bfa0a12f125163df64f4b764bc15"></span><a class="reference internal" href="../system/esp_err.html#_CPPv49esp_err_t" title="esp_err_t">esp_err_t</a> <code class="descname">mdns_handle_system_event</code><span class="sig-paren">(</span>void *<em>ctx</em>, <a class="reference internal" href="../system/esp_event_legacy.html#_CPPv414system_event_t" title="system_event_t">system_event_t</a> *<em>event</em><span class="sig-paren">)</span><a class="headerlink" href="mdns.html#_CPPv424mdns_handle_system_eventPvP14system_event_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>System event handler This method controls the service state on all active interfaces and applications are required to call it from the system event handler for normal operation of mDNS service. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: The system event context </li>
<li><code class="docutils literal notranslate"><span class="pre">event</span></code>: The system event </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="section" id="structures">
<h3>Structures<a class="headerlink" href="mdns.html#structures" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="_CPPv415mdns_txt_item_t">
<span id="_CPPv315mdns_txt_item_t"></span><span id="_CPPv215mdns_txt_item_t"></span><span id="mdns_txt_item_t"></span><span class="target" id="structmdns__txt__item__t"></span><em class="property">struct </em><code class="descname">mdns_txt_item_t</code><a class="headerlink" href="mdns.html#_CPPv415mdns_txt_item_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS basic text item structure Used in mdns_service_add() </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N15mdns_txt_item_t3keyE">
<span id="_CPPv3N15mdns_txt_item_t3keyE"></span><span id="_CPPv2N15mdns_txt_item_t3keyE"></span><span id="mdns_txt_item_t::key__cCP"></span><span class="target" id="structmdns__txt__item__t_1aac2205bf54deede319e61f03560677ee"></span><em class="property">const</em> char *<code class="descname">key</code><a class="headerlink" href="mdns.html#_CPPv4N15mdns_txt_item_t3keyE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>item key name </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N15mdns_txt_item_t5valueE">
<span id="_CPPv3N15mdns_txt_item_t5valueE"></span><span id="_CPPv2N15mdns_txt_item_t5valueE"></span><span id="mdns_txt_item_t::value__cCP"></span><span class="target" id="structmdns__txt__item__t_1afd248c401d6c0c00ba0a77eb6bd89fd7"></span><em class="property">const</em> char *<code class="descname">value</code><a class="headerlink" href="mdns.html#_CPPv4N15mdns_txt_item_t5valueE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>item value string </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv414mdns_ip_addr_s">
<span id="_CPPv314mdns_ip_addr_s"></span><span id="_CPPv214mdns_ip_addr_s"></span><span id="mdns_ip_addr_s"></span><span class="target" id="structmdns__ip__addr__s"></span><em class="property">struct </em><code class="descname">mdns_ip_addr_s</code><a class="headerlink" href="mdns.html#_CPPv414mdns_ip_addr_s" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS query linked list IP item </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N14mdns_ip_addr_s4addrE">
<span id="_CPPv3N14mdns_ip_addr_s4addrE"></span><span id="_CPPv2N14mdns_ip_addr_s4addrE"></span><span id="mdns_ip_addr_s::addr__esp_ip_addr_t"></span><span class="target" id="structmdns__ip__addr__s_1a6551a9e844533214d7da7f26921e8d7b"></span>esp_ip_addr_t <code class="descname">addr</code><a class="headerlink" href="mdns.html#_CPPv4N14mdns_ip_addr_s4addrE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>IP address </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N14mdns_ip_addr_s4nextE">
<span id="_CPPv3N14mdns_ip_addr_s4nextE"></span><span id="_CPPv2N14mdns_ip_addr_s4nextE"></span><span id="mdns_ip_addr_s::next__mdns_ip_addr_sP"></span><span class="target" id="structmdns__ip__addr__s_1acd517df206b0c3e16450f3fc0ada3185"></span><em class="property">struct</em> <a class="reference internal" href="mdns.html#_CPPv414mdns_ip_addr_s" title="mdns_ip_addr_s">mdns_ip_addr_s</a> *<code class="descname">next</code><a class="headerlink" href="mdns.html#_CPPv4N14mdns_ip_addr_s4nextE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>next IP, or NULL for the last IP in the list </p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv413mdns_result_s">
<span id="_CPPv313mdns_result_s"></span><span id="_CPPv213mdns_result_s"></span><span id="mdns_result_s"></span><span class="target" id="structmdns__result__s"></span><em class="property">struct </em><code class="descname">mdns_result_s</code><a class="headerlink" href="mdns.html#_CPPv413mdns_result_s" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS query result structure </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="member">
<dt id="_CPPv4N13mdns_result_s4nextE">
<span id="_CPPv3N13mdns_result_s4nextE"></span><span id="_CPPv2N13mdns_result_s4nextE"></span><span id="mdns_result_s::next__mdns_result_sP"></span><span class="target" id="structmdns__result__s_1afd40f35c5cd387069c66f9bb7e4f622d"></span><em class="property">struct</em> <a class="reference internal" href="mdns.html#_CPPv413mdns_result_s" title="mdns_result_s">mdns_result_s</a> *<code class="descname">next</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s4nextE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>next result, or NULL for the last result in the list </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s8tcpip_ifE">
<span id="_CPPv3N13mdns_result_s8tcpip_ifE"></span><span id="_CPPv2N13mdns_result_s8tcpip_ifE"></span><span id="mdns_result_s::tcpip_if__mdns_if_t"></span><span class="target" id="structmdns__result__s_1add7a3f5dd1927800c445f8abe321ceb0"></span><a class="reference internal" href="mdns.html#_CPPv49mdns_if_t" title="mdns_if_t">mdns_if_t</a> <code class="descname">tcpip_if</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s8tcpip_ifE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>interface index </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s11ip_protocolE">
<span id="_CPPv3N13mdns_result_s11ip_protocolE"></span><span id="_CPPv2N13mdns_result_s11ip_protocolE"></span><span id="mdns_result_s::ip_protocol__mdns_ip_protocol_t"></span><span class="target" id="structmdns__result__s_1aff66b72bd7941a197d96d86a473f79e4"></span><a class="reference internal" href="mdns.html#_CPPv418mdns_ip_protocol_t" title="mdns_ip_protocol_t">mdns_ip_protocol_t</a> <code class="descname">ip_protocol</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s11ip_protocolE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>ip_protocol type of the interface (v4/v6) </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s13instance_nameE">
<span id="_CPPv3N13mdns_result_s13instance_nameE"></span><span id="_CPPv2N13mdns_result_s13instance_nameE"></span><span id="mdns_result_s::instance_name__cP"></span><span class="target" id="structmdns__result__s_1ac67b4af869b06a6245e764675120ad7b"></span>char *<code class="descname">instance_name</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s13instance_nameE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>instance name </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s8hostnameE">
<span id="_CPPv3N13mdns_result_s8hostnameE"></span><span id="_CPPv2N13mdns_result_s8hostnameE"></span><span id="mdns_result_s::hostname__cP"></span><span class="target" id="structmdns__result__s_1aa4d541285021faf8feb2e0f5abe89353"></span>char *<code class="descname">hostname</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s8hostnameE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>hostname </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s4portE">
<span id="_CPPv3N13mdns_result_s4portE"></span><span id="_CPPv2N13mdns_result_s4portE"></span><span id="mdns_result_s::port__uint16_t"></span><span class="target" id="structmdns__result__s_1a968bcd2e2ddec6c1ceba674dfa59e5bd"></span>uint16_t <code class="descname">port</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s4portE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>service port </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s3txtE">
<span id="_CPPv3N13mdns_result_s3txtE"></span><span id="_CPPv2N13mdns_result_s3txtE"></span><span id="mdns_result_s::txt__mdns_txt_item_tP"></span><span class="target" id="structmdns__result__s_1a895ba931c167a9159b331562781a83d2"></span><a class="reference internal" href="mdns.html#_CPPv415mdns_txt_item_t" title="mdns_txt_item_t">mdns_txt_item_t</a> *<code class="descname">txt</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s3txtE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>txt record </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s9txt_countE">
<span id="_CPPv3N13mdns_result_s9txt_countE"></span><span id="_CPPv2N13mdns_result_s9txt_countE"></span><span id="mdns_result_s::txt_count__s"></span><span class="target" id="structmdns__result__s_1af160c366650f60688c93dc0473af6385"></span>size_t <code class="descname">txt_count</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s9txt_countE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>number of txt items </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N13mdns_result_s4addrE">
<span id="_CPPv3N13mdns_result_s4addrE"></span><span id="_CPPv2N13mdns_result_s4addrE"></span><span id="mdns_result_s::addr__mdns_ip_addr_tP"></span><span class="target" id="structmdns__result__s_1ad1874ef7491e8a973182a8253b742514"></span><a class="reference internal" href="mdns.html#_CPPv414mdns_ip_addr_t" title="mdns_ip_addr_t">mdns_ip_addr_t</a> *<code class="descname">addr</code><a class="headerlink" href="mdns.html#_CPPv4N13mdns_result_s4addrE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>linked list of IP addresses found </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="macros">
<h3>Macros<a class="headerlink" href="mdns.html#macros" title="Permalink to this headline">¶</a></h3>
<dl class="macro">
<dt id="c.MDNS_TYPE_A">
<span class="target" id="mdns_8h_1aadb9a175b672893b350f1e7032009e00"></span><code class="descname">MDNS_TYPE_A</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_A" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_PTR">
<span class="target" id="mdns_8h_1ab20e7e819cd80446f00124e510e76e7d"></span><code class="descname">MDNS_TYPE_PTR</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_PTR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_TXT">
<span class="target" id="mdns_8h_1a177dfb02a742aae54654f74060afd078"></span><code class="descname">MDNS_TYPE_TXT</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_TXT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_AAAA">
<span class="target" id="mdns_8h_1a70afb421967cdc04c57d4aef6ac01c71"></span><code class="descname">MDNS_TYPE_AAAA</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_AAAA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_SRV">
<span class="target" id="mdns_8h_1aa0284acaadb1f19e3eefb0c851c46295"></span><code class="descname">MDNS_TYPE_SRV</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_SRV" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_OPT">
<span class="target" id="mdns_8h_1a0f303a6564a2a3e96f1d641467b587fc"></span><code class="descname">MDNS_TYPE_OPT</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_OPT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_NSEC">
<span class="target" id="mdns_8h_1a6a701bfe1d93ccd23f7eefed93ac5d3d"></span><code class="descname">MDNS_TYPE_NSEC</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_NSEC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="macro">
<dt id="c.MDNS_TYPE_ANY">
<span class="target" id="mdns_8h_1a07b84349539bc1343c8a0fd0456869c2"></span><code class="descname">MDNS_TYPE_ANY</code><a class="headerlink" href="mdns.html#c.MDNS_TYPE_ANY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="type-definitions">
<h3>Type Definitions<a class="headerlink" href="mdns.html#type-definitions" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="_CPPv414mdns_ip_addr_t">
<span id="_CPPv314mdns_ip_addr_t"></span><span id="_CPPv214mdns_ip_addr_t"></span><span id="mdns_ip_addr_t"></span><span class="target" id="mdns_8h_1a46a09520f84adcd3748519d811b6e6ea"></span><em class="property">typedef </em><em class="property">struct</em> <a class="reference internal" href="mdns.html#_CPPv414mdns_ip_addr_s" title="mdns_ip_addr_s">mdns_ip_addr_s</a> <code class="descname">mdns_ip_addr_t</code><a class="headerlink" href="mdns.html#_CPPv414mdns_ip_addr_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS query linked list IP item </p>
</dd></dl>

<dl class="type">
<dt id="_CPPv49mdns_if_t">
<span id="_CPPv39mdns_if_t"></span><span id="_CPPv29mdns_if_t"></span><span id="mdns_if_t"></span><span class="target" id="mdns_8h_1afff67d05fed105e28fe8ed2553c4a915"></span><em class="property">typedef </em><em class="property">enum</em> <a class="reference internal" href="mdns.html#_CPPv416mdns_if_internal" title="mdns_if_internal">mdns_if_internal</a> <code class="descname">mdns_if_t</code><a class="headerlink" href="mdns.html#_CPPv49mdns_if_t" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="type">
<dt id="_CPPv413mdns_result_t">
<span id="_CPPv313mdns_result_t"></span><span id="_CPPv213mdns_result_t"></span><span id="mdns_result_t"></span><span class="target" id="mdns_8h_1aaf17d327afcd4e7d42f1379eb3563fa4"></span><em class="property">typedef </em><em class="property">struct</em> <a class="reference internal" href="mdns.html#_CPPv413mdns_result_s" title="mdns_result_s">mdns_result_s</a> <code class="descname">mdns_result_t</code><a class="headerlink" href="mdns.html#_CPPv413mdns_result_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS query result structure </p>
</dd></dl>

</div>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="mdns.html#enumerations" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="_CPPv418mdns_ip_protocol_t">
<span id="_CPPv318mdns_ip_protocol_t"></span><span id="_CPPv218mdns_ip_protocol_t"></span><span id="mdns_ip_protocol_t"></span><span class="target" id="mdns_8h_1a13f9e348f77ff335c56cc23978ce6598"></span><em class="property">enum </em><code class="descname">mdns_ip_protocol_t</code><a class="headerlink" href="mdns.html#_CPPv418mdns_ip_protocol_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>mDNS enum to specify the ip_protocol type </p>
<p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv419MDNS_IP_PROTOCOL_V4">
<span id="_CPPv319MDNS_IP_PROTOCOL_V4"></span><span id="_CPPv219MDNS_IP_PROTOCOL_V4"></span><span class="target" id="mdns_8h_1a13f9e348f77ff335c56cc23978ce6598a050dbfb44023f3573f27af9a95432d18"></span><code class="descname">MDNS_IP_PROTOCOL_V4</code><a class="headerlink" href="mdns.html#_CPPv419MDNS_IP_PROTOCOL_V4" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv419MDNS_IP_PROTOCOL_V6">
<span id="_CPPv319MDNS_IP_PROTOCOL_V6"></span><span id="_CPPv219MDNS_IP_PROTOCOL_V6"></span><span class="target" id="mdns_8h_1a13f9e348f77ff335c56cc23978ce6598a04e4300ba58e47beb8d587ab26eab884"></span><code class="descname">MDNS_IP_PROTOCOL_V6</code><a class="headerlink" href="mdns.html#_CPPv419MDNS_IP_PROTOCOL_V6" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv420MDNS_IP_PROTOCOL_MAX">
<span id="_CPPv320MDNS_IP_PROTOCOL_MAX"></span><span id="_CPPv220MDNS_IP_PROTOCOL_MAX"></span><span class="target" id="mdns_8h_1a13f9e348f77ff335c56cc23978ce6598a294747186fedd262f98ed90cb0202117"></span><code class="descname">MDNS_IP_PROTOCOL_MAX</code><a class="headerlink" href="mdns.html#_CPPv420MDNS_IP_PROTOCOL_MAX" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

<dl class="type">
<dt id="_CPPv416mdns_if_internal">
<span id="_CPPv316mdns_if_internal"></span><span id="_CPPv216mdns_if_internal"></span><span id="mdns_if_internal"></span><span class="target" id="mdns_8h_1a56a231fba70ced92843edb6b92b951b6"></span><em class="property">enum </em><code class="descname">mdns_if_internal</code><a class="headerlink" href="mdns.html#_CPPv416mdns_if_internal" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><em>Values:</em></p>
<dl class="enumerator">
<dt id="_CPPv411MDNS_IF_STA">
<span id="_CPPv311MDNS_IF_STA"></span><span id="_CPPv211MDNS_IF_STA"></span><span class="target" id="mdns_8h_1a56a231fba70ced92843edb6b92b951b6a0d4d221b86922e920f7fb369269dfa0c"></span><code class="descname">MDNS_IF_STA</code> = 0<a class="headerlink" href="mdns.html#_CPPv411MDNS_IF_STA" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv410MDNS_IF_AP">
<span id="_CPPv310MDNS_IF_AP"></span><span id="_CPPv210MDNS_IF_AP"></span><span class="target" id="mdns_8h_1a56a231fba70ced92843edb6b92b951b6a109c859635bb4908ba122aebfd5f469e"></span><code class="descname">MDNS_IF_AP</code> = 1<a class="headerlink" href="mdns.html#_CPPv410MDNS_IF_AP" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv411MDNS_IF_ETH">
<span id="_CPPv311MDNS_IF_ETH"></span><span id="_CPPv211MDNS_IF_ETH"></span><span class="target" id="mdns_8h_1a56a231fba70ced92843edb6b92b951b6a87f9bb18eb6db8e01efde7d9e0323da1"></span><code class="descname">MDNS_IF_ETH</code> = 2<a class="headerlink" href="mdns.html#_CPPv411MDNS_IF_ETH" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="enumerator">
<dt id="_CPPv411MDNS_IF_MAX">
<span id="_CPPv311MDNS_IF_MAX"></span><span id="_CPPv211MDNS_IF_MAX"></span><span class="target" id="mdns_8h_1a56a231fba70ced92843edb6b92b951b6a17bbe667d5a1f0d43da5306e5bd0ea3e"></span><code class="descname">MDNS_IF_MAX</code><a class="headerlink" href="mdns.html#_CPPv411MDNS_IF_MAX" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modbus.html" class="btn btn-neutral float-right" title="ESP-Modbus" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="esp_local_ctrl.html" class="btn btn-neutral float-left" title="ESP Local Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>