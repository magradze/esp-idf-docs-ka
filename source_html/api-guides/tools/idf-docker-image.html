

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IDF Docker Image &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ULP Coprocessor programming" href="../ulp.html" />
    <link rel="prev" title="Downloadable Tools" href="idf-tools.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/tools/idf-docker-image.html" />

<link rel="stylesheet" href="https://media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-guides/tools/idf-docker-image"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
<script async type="text/javascript" src="../../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="espressif-esp-idf" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/api-guides/tools/idf-docker-image.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../app_trace.html">Application Level Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blufi.html">BluFi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootloader.html">Bootloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-system.html">Build System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build-system-legacy.html">Build System (Legacy GNU Make)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deep-sleep-stub.html">Deep Sleep Wake Stubs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-handling.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../esp-ble-mesh/ble-mesh-index.html">ESP-BLE-MESH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mesh.html">ESP-MESH (Wi-Fi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_dump.html">ESP32 Core Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event-handling.html">Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external-ram.html">External SPI-connected RAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fatal-errors.html">Fatal Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/flash-encryption.html">Flash Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freertos-smp.html">FreeRTOS SMP Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-notes.html">General Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hlinterrupts.html">High Level Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jtag-debugging/index.html">JTAG Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linker-script-generation.html">Linker Script Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lwip.html">lwIP TCP/IP Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../partition-tables.html">Partition Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RF_calibration.html">RF Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../romconsole.html">ROM debug console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security/secure-boot.html">Secure Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thread-local-storage.html">Thread Local Storage</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="idf-tools.html">IDF Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="idf-monitor.html">IDF Monitor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="idf-docker-image.html#">IDF Docker image</a><ul>
<li class="toctree-l4"><a class="reference internal" href="idf-docker-image.html#tags">Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="idf-docker-image.html#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ulp.html">ULP Coprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ulp-legacy.html">ULP Coprocessor (Legacy GNU Make)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unit-tests-legacy.html">Unit Testing (Legacy GNU Make)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unit-tests.html">Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wifi.html">WiFi Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">API Guides</a> &raquo;</li>
        
          <li><a href="index.html">Tools</a> &raquo;</li>
        
      <li>IDF Docker Image</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-guides/tools/idf-docker-image.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="idf-docker-image">
<h1>IDF Docker Image<a class="headerlink" href="idf-docker-image.html#idf-docker-image" title="Permalink to this headline">¶</a></h1>
<p>IDF Docker image (<code class="docutils literal notranslate"><span class="pre">espressif/idf</span></code>) is intended for building applications and libraries with specific versions of ESP-IDF, when doing automated builds.</p>
<p>The image contains:</p>
<ul class="simple">
<li>Common utilities such as git, wget, curl, zip.</li>
<li>Python 3.6 or newer.</li>
<li>A copy of a specific version of ESP-IDF (see below for information about versions). <code class="docutils literal notranslate"><span class="pre">IDF_PATH</span></code> environment variable is set, and points to ESP-IDF location in the container.</li>
<li>All the build tools required for the specific version of ESP-IDF: CMake, make, ninja, cross-compiler toolchains, etc.</li>
<li>All Python packages required by ESP-IDF are installed in a virtual environment.</li>
</ul>
<p>The image entrypoint sets up <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable to point to the correct version of tools, and activates the Python virtual environment. As a result, the environment is ready to use the ESP-IDF build system.</p>
<p>The image can also be used as a base for custom images, if additional utilities are required.</p>
<div class="section" id="tags">
<h2>Tags<a class="headerlink" href="idf-docker-image.html#tags" title="Permalink to this headline">¶</a></h2>
<p>Multiple tags of this image are maintained:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">latest</span></code>: tracks <code class="docutils literal notranslate"><span class="pre">master</span></code> branch of ESP-IDF</li>
<li><code class="docutils literal notranslate"><span class="pre">vX.Y</span></code>: corresponds to ESP-IDF release <code class="docutils literal notranslate"><span class="pre">vX.Y</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">release-vX.Y</span></code>: tracks <code class="docutils literal notranslate"><span class="pre">release/vX.Y</span></code> branch of ESP-IDF</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Versions of ESP-IDF released before this feature was introduced do not have corresponding Docker image versions. You can check the up-to-date list of available tags at <a class="reference external" href="https://hub.docker.com/r/espressif/idf/tags">https://hub.docker.com/r/espressif/idf/tags</a>.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="idf-docker-image.html#usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setting-up-docker">
<h3>Setting up Docker<a class="headerlink" href="idf-docker-image.html#setting-up-docker" title="Permalink to this headline">¶</a></h3>
<p>Before using the <code class="docutils literal notranslate"><span class="pre">espressif/idf</span></code> Docker image locally, make sure you have Docker installed. Follow the instructions at <a class="reference external" href="https://docs.docker.com/install/">https://docs.docker.com/install/</a>, if it is not installed yet.</p>
<p>If using the image in CI environment, consult the documentation of your CI service on how to specify the image used for the build process.</p>
</div>
<div class="section" id="building-a-project-with-cmake">
<h3>Building a project with CMake<a class="headerlink" href="idf-docker-image.html#building-a-project-with-cmake" title="Permalink to this headline">¶</a></h3>
<p>In the project directory, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --rm -v <span class="nv">$PWD</span>:/project -w /project espressif/idf idf.py build
</pre></div>
</div>
<p>The above command explained:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code>: runs a Docker image. It is a shorter form of the command <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">container</span> <span class="pre">run</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">--rm</span></code>: removes the container when the build is finished</li>
<li><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$PWD:/project</span></code>: mounts the current directory on the host (<code class="docutils literal notranslate"><span class="pre">$PWD</span></code>) as <code class="docutils literal notranslate"><span class="pre">/project</span></code> directory in the container</li>
<li><code class="docutils literal notranslate"><span class="pre">espressif/idf</span></code>: uses Docker image <code class="docutils literal notranslate"><span class="pre">espressif/idf</span></code> with tag <code class="docutils literal notranslate"><span class="pre">latest</span></code> (implicitly added by Docker when no tag is specified)</li>
<li><code class="docutils literal notranslate"><span class="pre">idf.py</span> <span class="pre">build</span></code>: runs this command inside the container</li>
</ul>
<p>To build with a specific docker image tag, specify it as <code class="docutils literal notranslate"><span class="pre">espressif/idf:TAG</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --rm -v <span class="nv">$PWD</span>:/project -w /project espressif/idf:v4.0 idf.py build
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At the time of writing, v4.0 release of ESP-IDF does not exist, yet, so the above command will not work. You can check the up-to-date list of available tags at <a class="reference external" href="https://hub.docker.com/r/espressif/idf/tags">https://hub.docker.com/r/espressif/idf/tags</a>.</p>
</div>
</div>
<div class="section" id="building-a-project-with-gnu-make">
<h3>Building a project with GNU Make<a class="headerlink" href="idf-docker-image.html#building-a-project-with-gnu-make" title="Permalink to this headline">¶</a></h3>
<p>Same as for CMake, except that the build command is different:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --rm -v <span class="nv">$PWD</span>:/project -w /project espressif/idf make defconfig all -j4
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <code class="docutils literal notranslate"><span class="pre">sdkconfig</span></code> file does not exist, the default behavior of GNU Make build system is to open the menuconfig UI. This may be not desired in automated build environments. To ensure that the <code class="docutils literal notranslate"><span class="pre">sdkconfig</span></code> file exists, <code class="docutils literal notranslate"><span class="pre">defconfig</span></code> target is added before <code class="docutils literal notranslate"><span class="pre">all</span></code>.</p>
</div>
</div>
<div class="section" id="using-the-image-interactively">
<h3>Using the image interactively<a class="headerlink" href="idf-docker-image.html#using-the-image-interactively" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to do builds interactively, to debug build issues or test the automated build scripts. Start the container with <cite>-i -t</cite> flags:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --rm -v <span class="nv">$PWD</span>:/project -w /project -it espressif/idf
</pre></div>
</div>
<p>Then inside the container, use <code class="docutils literal notranslate"><span class="pre">idf.py</span></code> as usual:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>idf.py menuconfig
idf.py build
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Commands which communicate with the development board, such as <code class="docutils literal notranslate"><span class="pre">idf.py</span> <span class="pre">flash</span></code> and <code class="docutils literal notranslate"><span class="pre">idf.py</span> <span class="pre">monitor</span></code> will not work in the container unless the serial port is passed through into the container. However currently this is not possible with Docker for Windows (<a class="reference external" href="https://github.com/docker/for-win/issues/1018">https://github.com/docker/for-win/issues/1018</a>) and Docker for Mac (<a class="reference external" href="https://github.com/docker/for-mac/issues/900">https://github.com/docker/for-mac/issues/900</a>).</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ulp.html" class="btn btn-neutral float-right" title="ULP Coprocessor programming" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="idf-tools.html" class="btn btn-neutral float-left" title="Downloadable Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>