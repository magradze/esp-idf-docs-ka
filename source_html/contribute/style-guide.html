

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Espressif IoT Development Framework Style Guide &mdash; ESP-IDF Programming Guide v4.1-dev-2071-gf91080637 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Documenting Code" href="documenting-code.html" />
    <link rel="prev" title="Contributions Guide" href="index.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://docs.espressif.com/projects/esp-idf/en/latest/contribute/style-guide.html" />

<link rel="stylesheet" href="https://media.readthedocs.com/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "contribute/style-guide"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://media.readthedocs.com/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
<script async type="text/javascript" src="../../../../../_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="espressif-esp-idf" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/contribute/style-guide.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ESP-IDF Programming Guide
          

          
            
            <img src="../_static/espressif-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hw-reference/index.html">H/W Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../esp32s2.html">ESP32-S2 Preview Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-guides/index.html">API Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries-and-frameworks/index.html">Libraries and Frameworks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contribute</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#before-contributing">Before Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pull-request-process">Pull Request Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#legal-part">Legal Part</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#related-documents">Related Documents</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="style-guide.html#">Espressif IoT Development Framework Style Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#about-this-guide">About This Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#c-code-formatting">C Code Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#id1">C++ Code Formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#cmake-code-style">CMake Code Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#configuring-the-code-style-for-a-project-using-editorconfig">Configuring the Code Style for a Project Using EditorConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#documenting-code">Documenting Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#style-guide-naming">Naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#structure">Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="style-guide.html#language-features">Language Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="documenting-code.html">Documenting Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="add-ons-reference.html">Documentation Add-ons and Extensions Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-examples.html">Creating Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference/template.html">API Documentation Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributor-agreement.html">Contributor Agreement</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../COPYRIGHT.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../languages.html">语言/Languages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">Guide Downloads</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ESP-IDF Programming Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Contributions Guide</a> &raquo;</li>
        
      <li>Espressif IoT Development Framework Style Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/espressif/esp-idf/blob/master/docs/en/contribute/style-guide.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="espressif-iot-development-framework-style-guide">
<h1>Espressif IoT Development Framework Style Guide<a class="headerlink" href="style-guide.html#espressif-iot-development-framework-style-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="about-this-guide">
<h2>About This Guide<a class="headerlink" href="style-guide.html#about-this-guide" title="Permalink to this headline">¶</a></h2>
<p>Purpose of this style guide is to encourage use of common coding practices within the ESP-IDF.</p>
<p>Style guide is a set of rules which are aimed to help create readable, maintainable, and robust code. By writing code which looks the same way across the code base we help others read and comprehend the code. By using same conventions for spaces and newlines we reduce chances that future changes will produce huge unreadable diffs. By following common patterns for module structure and by using language features consistently we help others understand code behavior.</p>
<p>We try to keep rules simple enough, which means that they can not cover all potential cases. In some cases one has to bend these simple rules to achieve readability, maintainability, or robustness.</p>
<p>When doing modifications to third-party code used in ESP-IDF, follow the way that particular project is written. That will help propose useful changes for merging into upstream project.</p>
</div>
<div class="section" id="c-code-formatting">
<h2>C Code Formatting<a class="headerlink" href="style-guide.html#c-code-formatting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="indentation">
<h3>Indentation<a class="headerlink" href="style-guide.html#indentation" title="Permalink to this headline">¶</a></h3>
<p>Use 4 spaces for each indentation level. Don’t use tabs for indentation. Configure the editor to emit 4 spaces each time you press tab key.</p>
</div>
<div class="section" id="vertical-space">
<h3>Vertical Space<a class="headerlink" href="style-guide.html#vertical-space" title="Permalink to this headline">¶</a></h3>
<p>Place one empty line between functions. Don’t begin or end a function with an empty line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">function1</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">do_one_thing</span><span class="p">();</span>
    <span class="n">do_another_thing</span><span class="p">();</span>
                                <span class="o">//</span> <span class="n">INCORRECT</span><span class="p">,</span> <span class="n">don</span><span class="s1">&#39;t place empty line here</span>
<span class="p">}</span>
                                <span class="o">//</span> <span class="n">place</span> <span class="n">empty</span> <span class="n">line</span> <span class="n">here</span>
<span class="n">void</span> <span class="n">function2</span><span class="p">()</span>
<span class="p">{</span>
                                <span class="o">//</span> <span class="n">INCORRECT</span><span class="p">,</span> <span class="n">don</span><span class="s1">&#39;t use an empty line here</span>
    <span class="nb">int</span> <span class="n">var</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">var</span> <span class="o">&lt;</span> <span class="n">SOME_CONSTANT</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">do_stuff</span><span class="p">(</span><span class="o">&amp;</span><span class="n">var</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The maximum line length is 120 characters as long as it doesn’t seriously affect the readability.</p>
</div>
<div class="section" id="horizontal-space">
<h3>Horizontal Space<a class="headerlink" href="style-guide.html#horizontal-space" title="Permalink to this headline">¶</a></h3>
<p>Always add single space after conditional and loop keywords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>    <span class="o">//</span> <span class="n">correct</span>
    <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>

<span class="n">switch</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span>        <span class="o">//</span> <span class="n">correct</span>
    <span class="n">case</span> <span class="mi">0</span><span class="p">:</span>
        <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>

<span class="k">for</span><span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">CONST</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>    <span class="o">//</span> <span class="n">INCORRECT</span>
    <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add single space around binary operators. No space is necessary for unary operators. It is okay to drop space around multiply and divide operators:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">);</span>    <span class="o">//</span> <span class="n">correct</span>

<span class="n">const</span> <span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">);</span>        <span class="o">//</span> <span class="n">also</span> <span class="n">okay</span>

<span class="nb">int</span> <span class="n">y_cur</span> <span class="o">=</span> <span class="o">-</span><span class="n">y</span><span class="p">;</span>                                         <span class="o">//</span> <span class="n">correct</span>
<span class="o">++</span><span class="n">y_cur</span><span class="p">;</span>

<span class="n">const</span> <span class="nb">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y0</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">y1</span><span class="o">-</span><span class="n">y0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x0</span><span class="p">);</span>                <span class="o">//</span> <span class="n">INCORRECT</span>
</pre></div>
</div>
<p>No space is necessary around <code class="docutils literal notranslate"><span class="pre">.</span></code> and <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> operators.</p>
<p>Sometimes adding horizontal space within a line can help make code more readable. For example, you can add space to align function arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gpio_matrix_in</span><span class="p">(</span><span class="n">PIN_CAM_D6</span><span class="p">,</span>   <span class="n">I2S0I_DATA_IN14_IDX</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
<span class="n">gpio_matrix_in</span><span class="p">(</span><span class="n">PIN_CAM_D7</span><span class="p">,</span>   <span class="n">I2S0I_DATA_IN15_IDX</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
<span class="n">gpio_matrix_in</span><span class="p">(</span><span class="n">PIN_CAM_HREF</span><span class="p">,</span> <span class="n">I2S0I_H_ENABLE_IDX</span><span class="p">,</span>  <span class="n">false</span><span class="p">);</span>
<span class="n">gpio_matrix_in</span><span class="p">(</span><span class="n">PIN_CAM_PCLK</span><span class="p">,</span> <span class="n">I2S0I_DATA_IN15_IDX</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
</pre></div>
</div>
<p>Note however that if someone goes to add new line with a longer identifier as first argument (e.g.  <code class="docutils literal notranslate"><span class="pre">PIN_CAM_VSYNC</span></code>), it will not fit. So other lines would have to be realigned, adding meaningless changes to the commit.</p>
<p>Therefore, use horizontal alignment sparingly, especially if you expect new lines to be added to the list later.</p>
<p>Never use TAB characters for horizontal alignment.</p>
<p>Never add trailing whitespace at the end of the line.</p>
</div>
<div class="section" id="braces">
<h3>Braces<a class="headerlink" href="style-guide.html#braces" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Function definition should have a brace on a separate line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">correct</span><span class="p">:</span>
<span class="n">void</span> <span class="n">function</span><span class="p">(</span><span class="nb">int</span> <span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>

<span class="p">}</span>

<span class="o">//</span> <span class="n">NOT</span> <span class="n">like</span> <span class="n">this</span><span class="p">:</span>
<span class="n">void</span> <span class="n">function</span><span class="p">(</span><span class="nb">int</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Within a function, place opening brace on the same line with conditional and loop statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">do_one</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">other_condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">do_two</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="comments">
<h3>Comments<a class="headerlink" href="style-guide.html#comments" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">//</span></code> for single line comments. For multi-line comments it is okay to use either <code class="docutils literal notranslate"><span class="pre">//</span></code> on each line or a <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> block.</p>
<p>Although not directly related to formatting, here are a few notes about using comments effectively.</p>
<ul>
<li><p class="first">Don’t use single comments to disable some functionality:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>void init_something()
{
    setup_dma();
    // load_resources();                // WHY is this thing commented, asks the reader?
    start_timer();
}
</pre></div>
</div>
</li>
<li><p class="first">If some code is no longer required, remove it completely. If you need it you can always look it up in git history of this file. If you disable some call because of temporary reasons, with an intention to restore it in the future, add explanation on the adjacent line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">init_something</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">setup_dma</span><span class="p">();</span>
    <span class="o">//</span> <span class="n">TODO</span><span class="p">:</span> <span class="n">we</span> <span class="n">should</span> <span class="n">load</span> <span class="n">resources</span> <span class="n">here</span><span class="p">,</span> <span class="n">but</span> <span class="n">loader</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">fully</span> <span class="n">integrated</span> <span class="n">yet</span><span class="o">.</span>
    <span class="o">//</span> <span class="n">load_resources</span><span class="p">();</span>
    <span class="n">start_timer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Same goes for <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">0</span> <span class="pre">...</span> <span class="pre">#endif</span></code> blocks. Remove code block completely if it is not used. Otherwise, add comment explaining why the block is disabled. Don’t use <code class="docutils literal notranslate"><span class="pre">#if</span> <span class="pre">0</span> <span class="pre">...</span> <span class="pre">#endif</span></code> or comments to store code snippets which you may need in the future.</p>
</li>
<li><p class="first">Don’t add trivial comments about authorship and change date. You can always look up who modified any given line using git. E.g. this comment adds clutter to the code without adding any useful information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">init_something</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">setup_dma</span><span class="p">();</span>
    <span class="o">//</span> <span class="n">XXX</span> <span class="n">add</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">01</span>
    <span class="n">init_dma_list</span><span class="p">();</span>
    <span class="n">fill_dma_item</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="o">//</span> <span class="n">end</span> <span class="n">XXX</span> <span class="n">add</span>
    <span class="n">start_timer</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="line-endings">
<h3>Line Endings<a class="headerlink" href="style-guide.html#line-endings" title="Permalink to this headline">¶</a></h3>
<p>Commits should only contain files with LF (Unix style) endings.</p>
<p>Windows users can configure git to check out CRLF (Windows style) endings locally and commit LF endings by setting the <code class="docutils literal notranslate"><span class="pre">core.autocrlf</span></code> setting. <cite>Github has a document about setting this option &lt;github-line-endings&gt;</cite>. However because MSYS2 uses Unix-style line endings, it is often easier to configure your text editor to use LF (Unix style) endings when editing ESP-IDF source files.</p>
<p>If you accidentally have some commits in your branch that add LF endings, you can convert them to Unix by running this command in an MSYS2 or Unix terminal (change directory to the IDF working directory and check the correct branch is currently checked out, beforehand):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">rebase</span> <span class="o">--</span><span class="n">exec</span> <span class="s1">&#39;git diff-tree --no-commit-id --name-only -r HEAD | xargs dos2unix &amp;&amp; git commit -a --amend --no-edit --allow-empty&#39;</span> <span class="n">master</span>
</pre></div>
</div>
<p>(Note that this line rebases on master, change the branch name at the end to rebase on another branch.)</p>
<p>For updating a single commit, it’s possible to run <code class="docutils literal notranslate"><span class="pre">dos2unix</span> <span class="pre">FILENAME</span></code> and then run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span></code></p>
</div>
<div class="section" id="formatting-your-code">
<h3>Formatting Your Code<a class="headerlink" href="style-guide.html#formatting-your-code" title="Permalink to this headline">¶</a></h3>
<p>You can use <code class="docutils literal notranslate"><span class="pre">astyle</span></code> program to format your code according to the above recommendations.</p>
<p>If you are writing a file from scratch, or doing a complete rewrite, feel free to re-format the entire file. If you are changing a small portion of file, don’t re-format the code you didn’t change. This will help others when they review your changes.</p>
<p>To re-format a file, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tools</span><span class="o">/</span><span class="nb">format</span><span class="o">.</span><span class="n">sh</span> <span class="n">components</span><span class="o">/</span><span class="n">my_component</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>C++ Code Formatting<a class="headerlink" href="style-guide.html#id1" title="Permalink to this headline">¶</a></h2>
<p>The same rules as for C apply. Where they are not enough, apply the following rules.</p>
<div class="section" id="file-naming">
<h3>File Naming<a class="headerlink" href="style-guide.html#file-naming" title="Permalink to this headline">¶</a></h3>
<p>C++ Header files have the extension <code class="docutils literal notranslate"><span class="pre">.hpp</span></code>. C++ source files have the extension <code class="docutils literal notranslate"><span class="pre">.cpp</span></code>. The latter is important for the compiler to distiguish them from normal C source files.</p>
</div>
<div class="section" id="naming">
<h3>Naming<a class="headerlink" href="style-guide.html#naming" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Class and struct</strong> names shall be written in <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code> with a capital letter as beginning. Member variables and methods shall be in <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>.</li>
<li><strong>Namespaces</strong> shall be in lower <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>.</li>
<li><strong>Templates</strong> are specified in the line above the function declaration.</li>
<li>Interfaces in terms of Object-Oriented Programming shall be named without the suffix <code class="docutils literal notranslate"><span class="pre">...Interface</span></code>. Later, this makes it easier to extract interfaces from normal classes and vice versa without making a breaking change.</li>
</ul>
</div>
<div class="section" id="member-order-in-classes">
<h3>Member Order in Classes<a class="headerlink" href="style-guide.html#member-order-in-classes" title="Permalink to this headline">¶</a></h3>
<p>In order of precedence:</p>
<ul class="simple">
<li>First put the public members, then the protected, then private ones. Omit public, protected or private sections without any members.</li>
<li>First put constructors/destructors, then member functions, then member variables.</li>
</ul>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ForExample</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="o">//</span> <span class="n">first</span> <span class="n">constructors</span><span class="p">,</span> <span class="n">then</span> <span class="n">default</span> <span class="n">constructor</span><span class="p">,</span> <span class="n">then</span> <span class="n">destructor</span>
    <span class="n">ForExample</span><span class="p">(</span><span class="n">double</span> <span class="n">example_factor_arg</span><span class="p">);</span>
    <span class="n">ForExample</span><span class="p">();</span>
    <span class="o">~</span><span class="n">ForExample</span><span class="p">();</span>

    <span class="o">//</span> <span class="n">then</span> <span class="n">remaining</span> <span class="n">pubic</span> <span class="n">methods</span>
    <span class="n">set_example_factor</span><span class="p">(</span><span class="n">double</span> <span class="n">example_factor_arg</span><span class="p">);</span>

    <span class="o">//</span> <span class="n">then</span> <span class="n">public</span> <span class="n">member</span> <span class="n">variables</span>
    <span class="n">uint32_t</span> <span class="n">public_data_member</span><span class="p">;</span>

<span class="n">private</span><span class="p">:</span>
    <span class="o">//</span> <span class="n">first</span> <span class="n">private</span> <span class="n">methods</span>
    <span class="n">void</span> <span class="n">internal_method</span><span class="p">();</span>

    <span class="o">//</span> <span class="n">then</span> <span class="n">private</span> <span class="n">member</span> <span class="n">variables</span>
    <span class="n">double</span> <span class="n">example_factor</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="spacing">
<h3>Spacing<a class="headerlink" href="style-guide.html#spacing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Don’t indent inside namespaces.</li>
<li>Put <code class="docutils literal notranslate"><span class="pre">public</span></code>, <code class="docutils literal notranslate"><span class="pre">protected</span></code> and <code class="docutils literal notranslate"><span class="pre">private</span></code> labels at the same indentation level as the corresponding <code class="docutils literal notranslate"><span class="pre">class</span></code> label.</li>
</ul>
</div>
<div class="section" id="simple-example">
<h3>Simple Example<a class="headerlink" href="style-guide.html#simple-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">file</span> <span class="n">spaceship</span><span class="o">.</span><span class="n">h</span>
<span class="c1">#ifndef SPACESHIP_H_</span>
<span class="c1">#define SPACESHIP_H_</span>
<span class="c1">#include &lt;cstdlib&gt;</span>

<span class="n">namespace</span> <span class="n">spaceships</span> <span class="p">{</span>

<span class="k">class</span> <span class="nc">SpaceShip</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="n">SpaceShip</span><span class="p">(</span><span class="n">size_t</span> <span class="n">crew</span><span class="p">);</span>
    <span class="n">size_t</span> <span class="n">get_crew_size</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>

<span class="n">private</span><span class="p">:</span>
    <span class="n">const</span> <span class="n">size_t</span> <span class="n">crew</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">SpaceShuttle</span> <span class="p">:</span> <span class="n">public</span> <span class="n">SpaceShip</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="n">SpaceShuttle</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Sojuz</span> <span class="p">:</span> <span class="n">public</span> <span class="n">SpaceShip</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="n">Sojuz</span><span class="p">();</span>
<span class="p">};</span>

<span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">CargoShip</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="n">CargoShip</span><span class="p">(</span><span class="n">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">cargo</span><span class="p">);</span>

<span class="n">private</span><span class="p">:</span>
    <span class="n">T</span> <span class="n">cargo</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">}</span> <span class="o">//</span> <span class="n">namespace</span> <span class="n">spaceships</span>

<span class="c1">#endif // SPACESHIP_H_</span>

<span class="o">//</span> <span class="n">file</span> <span class="n">spaceship</span><span class="o">.</span><span class="n">cpp</span>
<span class="c1">#include &quot;spaceship.h&quot;</span>

<span class="n">namespace</span> <span class="n">spaceships</span> <span class="p">{</span>

<span class="o">//</span> <span class="n">Putting</span> <span class="n">the</span> <span class="n">curly</span> <span class="n">braces</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">same</span> <span class="n">line</span> <span class="k">for</span> <span class="n">constructors</span> <span class="ow">is</span> <span class="n">OK</span> <span class="k">if</span> <span class="n">it</span> <span class="n">only</span> <span class="n">initializes</span>
<span class="o">//</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">initializer</span> <span class="nb">list</span>
<span class="n">SpaceShip</span><span class="p">::</span><span class="n">SpaceShip</span><span class="p">(</span><span class="n">size_t</span> <span class="n">crew</span><span class="p">)</span> <span class="p">:</span> <span class="n">crew</span><span class="p">(</span><span class="n">crew</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">size_t</span> <span class="n">SpaceShip</span><span class="p">::</span><span class="n">get_crew_size</span><span class="p">()</span> <span class="n">const</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">crew</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">SpaceShuttle</span><span class="p">::</span><span class="n">SpaceShuttle</span><span class="p">()</span> <span class="p">:</span> <span class="n">SpaceShip</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="n">doing</span> <span class="n">further</span> <span class="n">initialization</span>
<span class="p">}</span>

<span class="n">Sojuz</span><span class="p">::</span><span class="n">Sojuz</span><span class="p">()</span> <span class="p">:</span> <span class="n">SpaceShip</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="n">doing</span> <span class="n">further</span> <span class="n">initialization</span>
<span class="p">}</span>

<span class="n">template</span> <span class="o">&lt;</span><span class="n">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="n">CargoShip</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">CargoShip</span><span class="p">(</span><span class="n">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">cargo</span><span class="p">)</span> <span class="p">:</span> <span class="n">cargo</span><span class="p">(</span><span class="n">cargo</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="p">}</span> <span class="o">//</span> <span class="n">namespace</span> <span class="n">spaceships</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cmake-code-style">
<h2>CMake Code Style<a class="headerlink" href="style-guide.html#cmake-code-style" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Indent with four spaces.</li>
<li>Maximum line length 120 characters. When splitting lines, try to
focus on readability where possible (for example, by pairing up
keyword/argument pairs on individual lines).</li>
<li>Don’t put anything in the optional parentheses after <code class="docutils literal notranslate"><span class="pre">endforeach()</span></code>, <code class="docutils literal notranslate"><span class="pre">endif()</span></code>, etc.</li>
<li>Use lowercase (<code class="docutils literal notranslate"><span class="pre">with_underscores</span></code>) for command, function, and macro names.</li>
<li>For locally scoped variables, use lowercase (<code class="docutils literal notranslate"><span class="pre">with_underscores</span></code>).</li>
<li>For globally scoped variables, use uppercase (<code class="docutils literal notranslate"><span class="pre">WITH_UNDERSCORES</span></code>).</li>
<li>Otherwise follow the defaults of the <a class="reference external" href="https://github.com/richq/cmake-lint">cmake-lint</a> project.</li>
</ul>
</div>
<div class="section" id="configuring-the-code-style-for-a-project-using-editorconfig">
<h2>Configuring the Code Style for a Project Using EditorConfig<a class="headerlink" href="style-guide.html#configuring-the-code-style-for-a-project-using-editorconfig" title="Permalink to this headline">¶</a></h2>
<p>EditorConfig helps developers define and maintain consistent coding styles between different editors and IDEs. The EditorConfig project consists of a file format for defining coding styles and a collection of text editor plugins that enable editors to read the file format and adhere to defined styles. EditorConfig files are easily readable and they work nicely with version control systems.</p>
<p>For more information, see <a class="reference external" href="http://editorconfig.org">EditorConfig</a> Website.</p>
</div>
<div class="section" id="documenting-code">
<h2>Documenting Code<a class="headerlink" href="style-guide.html#documenting-code" title="Permalink to this headline">¶</a></h2>
<p>Please see the guide here: <a class="reference internal" href="documenting-code.html"><span class="doc">Documenting Code</span></a>.</p>
</div>
<div class="section" id="style-guide-naming">
<span id="id2"></span><h2>Naming<a class="headerlink" href="style-guide.html#style-guide-naming" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Any variable or function which is only used in a single source file should be declared <code class="docutils literal notranslate"><span class="pre">static</span></code>.</li>
<li>Public names (non-static variables and functions) should be namespaced with a per-component or per-unit prefix, to avoid naming collisions. ie <code class="docutils literal notranslate"><span class="pre">esp_vfs_register()</span></code> or <code class="docutils literal notranslate"><span class="pre">esp_console_run()</span></code>. Starting the prefix with <code class="docutils literal notranslate"><span class="pre">esp_</span></code> for Espressif-specific names is optional, but should be consistent with any other names in the same component.</li>
<li>Static variables should be prefixed with <code class="docutils literal notranslate"><span class="pre">s_</span></code> for easy identification. For example, <code class="docutils literal notranslate"><span class="pre">static</span> <span class="pre">bool</span> <span class="pre">s_invert</span></code>.</li>
<li>Avoid unnecessary abbreviations (ie shortening <code class="docutils literal notranslate"><span class="pre">data</span></code> to <code class="docutils literal notranslate"><span class="pre">dat</span></code>), unless the resulting name would otherwise be very long.</li>
</ul>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="style-guide.html#structure" title="Permalink to this headline">¶</a></h2>
<p>To be written.</p>
</div>
<div class="section" id="language-features">
<h2>Language Features<a class="headerlink" href="style-guide.html#language-features" title="Permalink to this headline">¶</a></h2>
<p>To be written.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="documenting-code.html" class="btn btn-neutral float-right" title="Documenting Code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Contributions Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2019, Espressif Systems (Shanghai) CO., LTD
      
        <span class="commit">
          Revision <code>f9108063</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>