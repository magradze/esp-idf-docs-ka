
<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>გარე სტეკით გამოძახების ფუნქცია — ESP-IDF პროგრამირების სახელმძღვანელო v4.1-dev-2071-gf91080637 დოკუმენტაცია</title>
<script src="../../_static/js/modernizr.min.js" type="text/javascript"></script>
<script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js" type="text/javascript"></script>
<script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<script src="../../_static/language_data.js" type="text/javascript"></script>
<script src="https://media.readthedocs.com/javascript/readthedocs-doc-embed.js" type="text/javascript"></script>
<script src="../../_static/js/theme.js" type="text/javascript"></script>
<link href="../../_static/css/theme.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/theme_overrides.css" rel="stylesheet" type="text/css"/>
<link href="../../about.html" rel="author" title="About these documents"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="intr_alloc.html" rel="next" title="Interrupt allocation"/>
<link href="ipc.html" rel="prev" title="Inter-Processor Call"/>
<!-- RTD Extra Head -->
<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/esp_expression_with_stack.html" rel="canonical"/>
<link href="https://media.readthedocs.com/css/readthedocs-doc-embed.css" rel="stylesheet" type="text/css"/>
<script src="../../_static/readthedocs-data.js" type="text/javascript"></script>
<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "api-reference/system/esp_expression_with_stack"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>
<script src="https://media.readthedocs.com/javascript/readthedocs-analytics.js" type="text/javascript"></script>
<!-- end RTD <extrahead> -->
<script async="" src="../../../../../../_/static/javascript/readthedocs-addons.js" type="text/javascript"></script><meta content="espressif-esp-idf" name="readthedocs-project-slug"><meta content="latest" name="readthedocs-version-slug"><meta content="/api-reference/system/esp_expression_with_stack.html" name="readthedocs-resolver-filename"/><meta content="200" name="readthedocs-http-status"/></meta></meta></head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../../index.html"> ESP-IDF პროგრამირების სახელმძღვანელო
          

          
            
            <img alt="Logo" class="logo" src="../../_static/espressif-logo.svg"/>
</a>
<div class="version">
                latest
              </div>
<div role="search">
<form action="../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">დაწყება</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API მითითება</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">ქსელური მუშაობა</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peripherals/index.html">პერიფერიული მოწყობილობები</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/index.html">პროტოკოლები</a></li>
<li class="toctree-l2"><a class="reference internal" href="../provisioning/index.html">უზრუნველყოფა</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/index.html">შენახვა</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">სისტემა</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_image_format.html">აპლიკაციის სურათის ფორმატი</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_trace.html">აპლიკაციის დონის ტრასირება</a></li>
<li class="toctree-l3"><a class="reference internal" href="efuse.html">eFuse მენეჯერი</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_err.html">შეცდომის კოდები და დამხმარე ფუნქციები</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_https_ota.html">ESP HTTPS OTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_pthread.html">ESP pthread</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_event.html">მოვლენების ციკლის ბიბლიოთეკა</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos.html">უფასო RTOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="freertos_additions.html">უფასო RTOS დამატებები</a></li>
<li class="toctree-l3"><a class="reference internal" href="mem_alloc.html">გროვის მეხსიერების განაწილება</a></li>
<li class="toctree-l3"><a class="reference internal" href="heap_debug.html">გროვის მეხსიერების გამართვა</a></li>
<li class="toctree-l3"><a class="reference internal" href="esp_timer.html">მაღალი გარჩევადობის ტაიმერი</a></li>
<li class="toctree-l3"><a class="reference internal" href="himem.html">Himem (დიდი გარე SPI ოპერატიული მეხსიერება) API</a></li>
<li class="toctree-l3"><a class="reference internal" href="ipc.html">პროცესორებს შორის ზარი</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="esp_expression_with_stack.html#">ფუნქციის გამოძახება გარე სტეკით</a><ul>
<li class="toctree-l4"><a class="reference internal" href="esp_expression_with_stack.html#overview">მიმოხილვა</a></li>
<li class="toctree-l4"><a class="reference internal" href="esp_expression_with_stack.html#usage">გამოყენება</a></li>
<li class="toctree-l4"><a class="reference internal" href="esp_expression_with_stack.html#api-reference">API მითითება</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="intr_alloc.html">შეწყვეტის განაწილება</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">ლოგირება</a></li>
<li class="toctree-l3"><a class="reference internal" href="system.html">სხვადასხვა სისტემა, API წმ</a></li>
<li class="toctree-l3"><a class="reference internal" href="ota.html">უსადენო განახლებები (OTA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="perfmon.html">შესრულების მონიტორი</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_management.html">ენერგიის მართვა</a></li>
<li class="toctree-l3"><a class="reference internal" href="sleep_modes.html">ძილის რეჟიმები</a></li>
<li class="toctree-l3"><a class="reference internal" href="wdts.html">მეთვალყურე ძაღლები</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_time.html">სისტემის დრო</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kconfig.html">კონფიგურაციის პარამეტრები</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error-codes.html">შეცდომის კოდების მითითება</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../hw-reference/index.html">ტექნიკის/საშუალებების მითითება</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../esp32s2.html">ESP32-S2-ის წინასწარი გადახედვის მხარდაჭერა</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-guides/index.html">API სახელმძღვანელოები</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libraries-and-frameworks/index.html">ბიბლიოთეკები და ჩარჩოები</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">წვლილი შეიტანეთ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions.html">ვერსიები</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources.html">რესურსები</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../COPYRIGHT.html">საავტორო უფლებები</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">შესახებ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../languages.html">语言/ენები</a></li>
<li class="toctree-l1"><a class="reference external" href="https://readthedocs.com/projects/espressif-esp-idf/downloads/">სახელმძღვანელოს ჩამოტვირთვები</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../../index.html">ESP-IDF პროგრამირების სახელმძღვანელო</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a href="../../index.html">დოკუმენტები</a> »</li>
<li><a href="../index.html">API მითითება</a> »</li>
<li><a href="index.html">სისტემის API</a> »</li>
<li>ფუნქციის გამოძახება გარე სტეკით</li>
<li class="wy-breadcrumbs-aside">
<a class="fa fa-github" href="https://github.com/espressif/esp-idf/blob/master/docs/en/api-reference/system/esp_expression_with_stack.rst"> რედაქტირება GitHub-ზე</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<div class="section" id="call-function-with-external-stack">
<h1>ფუნქციის გამოძახება გარე სტეკით<a class="headerlink" href="esp_expression_with_stack.html#call-function-with-external-stack" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>მიმოხილვა<a class="headerlink" href="esp_expression_with_stack.html#overview" title="Permalink to this headline">¶</a></h2>
<p>მოცემული ფუნქცია შეიძლება შესრულდეს მომხმარებლისთვის გამოყოფილი დასტის სივრცით, რომელიც დამოუკიდებელია მიმდინარე დავალებების დასტისგან. ეს მექანიზმი შეიძლება გამოყენებულ იქნას დასტის სივრცის დაზოგვისთვის, რომელიც იკარგება დავალებების მიერ, რომლებიც იძახებენ საერთო ფუნქციას ინტენსიური დასტის გამოყენებით, როგორიცაა <cite>printf</cite>მოცემული ფუნქციის გამოძახება შესაძლებელია მაკროს შიგნით. <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ESP_EXECUTE_EXPRESSION_WITH_STACK()</span></code>
ის გადამისამართებს შესასრულებელ სამიზნე ფუნქციას მომხმარებლის მიერ გამოყოფილი სივრცის გამოყენებით.</p>
</div>
<div class="section" id="usage">
<h2>გამოყენება<a class="headerlink" href="esp_expression_with_stack.html#usage" title="Permalink to this headline">¶</a></h2>
<p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ESP_EXECUTE_EXPRESSION_WITH_STACK()</span></code> იღებს სამ არგუმენტს: გამომძახებლის მიერ გამოყოფილ mutex ობიექტს, რომელიც გამოიყენება დასაცავად, თუ იგივე ფუნქცია იზიარებს მის გამოყოფილ სტეკს, დასტის ზედა ნაწილის მიმთითებელს, რომელიც გამოიყენება ამ ფუნქციისთვის და თავად ფუნქციას, გაითვალისწინეთ, რომ ფუნქცია გადაეცემა ზუსტად ისევე, როგორც ჩვეულებრივი გზით გამოძახებისას.</p>
<p>გამოყენება შეიძლება ქვემოთ მოცემული კოდის მსგავსი იყოს:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">//Let's suppose we wanting to call printf using a separated stack space</span>
<span class="c1">//allowing app to reduce its stack size.</span>
<span class="kt">void</span> <span class="nf">app_main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//Allocate a stack buffer, from heap or as a static form:</span>
    <span class="n">portSTACK_TYPE</span> <span class="o">*</span><span class="n">shared_stack</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">8192</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">portSTACK_TYPE</span><span class="p">));</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">shared_stack</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">//Allocate a mutex to protect its usage:</span>
    <span class="n">SemaphoreHandle_t</span> <span class="n">printf_lock</span> <span class="o">=</span> <span class="n">xSemaphoreCreateMutex</span><span class="p">();</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">printf_lock</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">//Call the desired function using the macro helper:</span>
    <span class="n">ESP_EXECUTE_EXPRESSION_WITH_STACK</span><span class="p">(</span><span class="n">printf_lock</span><span class="p">,</span>
                                    <span class="n">shared_stack</span><span class="p">,</span>
                                    <span class="n">printf</span><span class="p">(</span><span class="s">"Executing this from external stack! </span><span class="se">\n</span><span class="s">"</span><span class="p">));</span>
    <span class="n">vSemaphoreDelete</span><span class="p">(</span><span class="n">printf_lock</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">shared_stack</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<span id="esp-call-with-stack-basic-usage"></span><h2>API მითითება<a class="headerlink" href="esp_expression_with_stack.html#api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="header-file">
<h3>სათაურის ფაილი<a class="headerlink" href="esp_expression_with_stack.html#header-file" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://github.com/espressif/esp-idf/blob/f91080637/components/esp_common/include/esp_expression_with_stack.h">esp_common/include/esp_expression_with_stack.h</a></li>
</ul>
</div>
<div class="section" id="functions">
<h3>ფუნქციები<a class="headerlink" href="esp_expression_with_stack.html#functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="_CPPv422esp_switch_stack_setupP11StackType_t6size_t">
<span id="_CPPv322esp_switch_stack_setupP11StackType_t6size_t"></span><span id="_CPPv222esp_switch_stack_setupP11StackType_t6size_t"></span><span id="esp_switch_stack_setup__StackType_tP.s"></span><span class="target" id="esp__expression__with__stack_8h_1a991fd6af6b6e1efdc995da3e8264fa23"></span>StackType_t *<code class="descname">esp_switch_stack_setup</code><span class="sig-paren">(</span>StackType_t *<em>დასტა</em>, size_t <em>დასტის_ზომა</em><span class="sig-paren">)</span><a class="headerlink" href="esp_expression_with_stack.html#_CPPv422esp_switch_stack_setupP11StackType_t6size_t" title="Permalink to this definition">¶</a><br/></dt>
<dd><p>გამოყენებამდე შეავსეთ დასტის ჩარჩო CPU-სთვის სპეციფიკური მნიშვნელობით. </p>
<p><dl class="docutils">
<dt><strong>დაბრუნება</strong></dt>
<dd>New pointer to the top of stack </dd>
<dt><strong>შენიშვნა</strong></dt>
<dd>Application must not call this function directly </dd>
<dt><strong>პარამეტრები</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">stack</span></code>აბონენტის მიერ გამოყოფილი დასტის მაჩვენებელი </li>
<li><code class="docutils literal notranslate"><span class="pre">stack_size</span></code>: დასტის ზომა ბაიტებში </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>
<dl class="function">
<dt id="_CPPv422esp_switch_stack_enterP11StackType_tP8uint32_t">
<span id="_CPPv322esp_switch_stack_enterP11StackType_tP8uint32_t"></span><span id="_CPPv222esp_switch_stack_enterP11StackType_tP8uint32_t"></span><span id="esp_switch_stack_enter__StackType_tP.uint32_tP"></span><span class="target" id="esp__expression__with__stack_8h_1a3d0da2abf7912968710c3833f8ca6eb9"></span>void <code class="descname">esp_switch_stack_enter</code><span class="sig-paren">(</span>StackType_t *<em>დასტა</em>, uint32_t *<em>სარეზერვო_დასტა</em><span class="sig-paren">)</span><a class="headerlink" href="esp_expression_with_stack.html#_CPPv422esp_switch_stack_enterP11StackType_tP8uint32_t" title="Permalink to this definition">¶</a><br/></dt>
<dd><p>ცვლის CPU sp-რეგისტრს სხვა დასტის სივრცის გამოსაყენებლად და წინას შესანახად. </p>
<p><dl class="docutils">
<dt><strong>შენიშვნა</strong></dt>
<dd>Application must not call this function directly </dd>
<dt><strong>პარამეტრები</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">stack</span></code>აბონენტის მიერ გამოყოფილი დასტის მაჩვენებელი </li>
<li><code class="docutils literal notranslate"><span class="pre">backup_stack</span></code>: მიმდინარე დასტის შენახვის ადგილის მითითება </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>
<dl class="function">
<dt id="_CPPv421esp_switch_stack_exitP8uint32_t">
<span id="_CPPv321esp_switch_stack_exitP8uint32_t"></span><span id="_CPPv221esp_switch_stack_exitP8uint32_t"></span><span id="esp_switch_stack_exit__uint32_tP"></span><span class="target" id="esp__expression__with__stack_8h_1a44cb788681feed25b03ca81b518337ea"></span>void <code class="descname">esp_switch_stack_exit</code><span class="sig-paren">(</span>uint32_t *<em>სარეზერვო_დასტა</em><span class="sig-paren">)</span><a class="headerlink" href="esp_expression_with_stack.html#_CPPv421esp_switch_stack_exitP8uint32_t" title="Permalink to this definition">¶</a><br/></dt>
<dd><p>აღადგენს CPU-ს წინა sp-რეგისტრს. </p>
<p><dl class="docutils">
<dt><strong>შენიშვნა</strong></dt>
<dd>Application must not call this function directly </dd>
<dt><strong>პარამეტრები</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">backup_stack</span></code>: მაჩვენებელი იმ ადგილისა, სადაც სტეკი იყო შენახული </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>
</div>
<div class="section" id="macros">
<h3>მაკროები<a class="headerlink" href="esp_expression_with_stack.html#macros" title="Permalink to this headline">¶</a></h3>
<dl class="macro">
<dt id="c.ESP_EXECUTE_EXPRESSION_WITH_STACK">
<span class="target" id="esp__expression__with__stack_8h_1ad4718d56f727f526f9c71db40dad624b"></span><code class="descname">ESP_EXECUTE_EXPRESSION_WITH_STACK</code><span class="sig-paren">(</span>lock, stack, stack_size, expression<span class="sig-paren">)</span><a class="headerlink" href="esp_expression_with_stack.html#c.ESP_EXECUTE_EXPRESSION_WITH_STACK" title="Permalink to this definition">¶</a></dt>
<dd><p>ასრულებს 1-სტრიქონიან გამოსახულებას აპლიკაციისთვის გამოყოფილი დასტით. </p>
<p><dl class="docutils">
<dt><strong>შენიშვნა</strong></dt>
<dd>if either lock, stack or stack size is invalid, the expression will be called using the current stack. </dd>
<dt><strong>პარამეტრები</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">lock</span></code>Mutex ობიექტი, რომელიც უნდა დავიცვათ გაზიარებული დასტის შემთხვევაში </li>
<li><code class="docutils literal notranslate"><span class="pre">stack</span></code>: მომხმარებლის მიერ გამოყოფილი დასტის მაჩვენებელი </li>
<li><code class="docutils literal notranslate"><span class="pre">stack_size</span></code>მიმდინარე დასტის ზომა ბაიტებში </li>
<li><code class="docutils literal notranslate"><span class="pre">expression</span></code>: დასტის გამოყენებით შესასრულებელი გამოსახულება ან ფუნქცია </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>
</div>
</div>
</div>
</div>
</div>
<footer>
<div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
<a accesskey="n" class="btn btn-neutral float-right" href="intr_alloc.html" rel="next" title="Interrupt allocation">შემდეგი <span class="fa fa-arrow-circle-right"></span></a>
<a accesskey="p" class="btn btn-neutral float-left" href="ipc.html" rel="prev" title="Inter-Processor Call"><span class="fa fa-arrow-circle-left"></span> წინა</a>
</div>
<hr/>
<div role="contentinfo">
<p>
        © საავტორო უფლება 2016 - 2019, Espressif Systems (შანხაი) კომპანია, შპს
      
        <span class="commit">
          რევიზია <code>f9108063</code>.
        </span>
</p>
</div>
  Built with <a href="http://sphinx-doc.org/">სფინქსი</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">თემა</a> provided by <a href="https://readthedocs.org">წაიკითხეთ დოკუმენტები</a>. 

</footer>
</div>
</div>
</section>
</div>
<script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
</body>
</html>